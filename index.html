<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>KidsTimer</title>
  <meta name="description" content="Visueller Timer fuer Kinder - Aufgaben mit Ticki der Katze im Blick behalten">
  <meta name="theme-color" content="#4A90D9">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icons/apple-touch-icon.png">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div class="app">
    <header class="app-header">
      <h1 class="app-title">KidsTimer</h1>
    </header>

    <main class="app-main">
      <div class="clock-section">
        <div class="clock-container">
          <canvas id="analog-clock" width="400" height="400"></canvas>
        </div>
        <div class="timer-container" id="timer-container">
          <div class="timer-display" id="timer-display">00:00</div>
          <div class="timer-label" data-i18n="timer.remaining">verbleibend</div>
          <div class="timer-controls">
            <button id="btn-start" class="btn btn-start" disabled data-i18n="btn.start">Start</button>
            <button id="btn-pause" class="btn btn-pause" hidden data-i18n="btn.pause">Pause</button>
            <button id="btn-stop" class="btn btn-stop" hidden data-i18n="btn.stop">Stop</button>
          </div>
        </div>
      </div>

      <div class="bottom-section">
        <div class="mascot-container" id="mascot-container">
          <!-- Kanoodle mascot SVG will be inserted here -->
        </div>
        <div class="tasks-section">
          <div class="tasks-header">
            <h2 data-i18n="tasks.title">Aufgaben</h2>
            <label class="autoplay-toggle">
              <input type="checkbox" id="autoplay-checkbox">
              <span class="autoplay-slider"></span>
              <span class="autoplay-label" data-i18n="autoplay.label">Durchlauf</span>
            </label>
            <button id="btn-add-task" class="btn btn-add" data-i18n="tasks.add">+ Neu</button>
          </div>
          <div class="tasks-list" id="tasks-list">
            <!-- Tasks will be rendered here -->
          </div>
        </div>
      </div>
    </main>

    <!-- Modal for adding/editing tasks -->
    <div class="modal-overlay" id="modal-overlay" hidden>
      <div class="modal">
        <h3 id="modal-title" data-i18n="modal.newTask">Neue Aufgabe</h3>
        <div class="form-group">
          <label for="task-name" data-i18n="modal.name">Name</label>
          <input type="text" id="task-name" data-i18n-placeholder="modal.namePlaceholder" placeholder="z.B. Hausaufgaben" maxlength="30">
        </div>
        <div class="form-group">
          <label for="task-duration" data-i18n="modal.duration">Dauer (Minuten)</label>
          <input type="number" id="task-duration" min="1" max="120" value="15">
        </div>
        <div class="form-group">
          <label data-i18n="modal.color">Farbe</label>
          <div class="color-picker" id="color-picker">
            <button class="color-swatch" data-color="#4A90D9" style="background:#4A90D9" data-i18n-title="color.blue" title="Blau"></button>
            <button class="color-swatch" data-color="#F5A623" style="background:#F5A623" data-i18n-title="color.orange" title="Orange"></button>
            <button class="color-swatch" data-color="#7ED321" style="background:#7ED321" data-i18n-title="color.green" title="GrÃ¼n"></button>
            <button class="color-swatch" data-color="#BD10E0" style="background:#BD10E0" data-i18n-title="color.purple" title="Lila"></button>
            <button class="color-swatch" data-color="#E91E8A" style="background:#E91E8A" data-i18n-title="color.pink" title="Rosa"></button>
            <button class="color-swatch" data-color="#F8E71C" style="background:#F8E71C" data-i18n-title="color.yellow" title="Gelb"></button>
          </div>
        </div>
        <div class="modal-buttons">
          <button id="btn-modal-cancel" class="btn btn-cancel" data-i18n="btn.cancel">Abbrechen</button>
          <button id="btn-modal-save-add" class="btn btn-save-add" hidden data-i18n="btn.saveAndNew">Speichern & Neu</button>
          <button id="btn-modal-save" class="btn btn-save" data-i18n="btn.save">Speichern</button>
        </div>
      </div>
    </div>
  </div>

  <script src="js/i18n.js"></script>
  <script src="js/clock.js"></script>
  <script src="js/timer.js"></script>
  <script src="js/app.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('sw.js');
    }
  </script>
</body>
</html>
